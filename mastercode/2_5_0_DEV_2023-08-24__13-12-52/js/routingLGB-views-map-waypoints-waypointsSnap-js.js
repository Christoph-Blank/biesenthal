(window.webpackJsonp=window.webpackJsonp||[]).push([[315,316],{1100:function(e,t,r){"use strict";var h=r(11),n=r(76),f=r(54),u=r(7),s=r(13),v=r(1),i=r(52),y=r(9),a=r(42),o=r(91),l=r(17),c=r(152),_=r(285);function p(e){return e.feature?e.feature:e.element?e.element:void 0}var d=function(o){function e(e){var t=e||{},r=t;r.handleDownEvent||(r.handleDownEvent=i.b),r.stopDown||(r.stopDown=i.a),o.call(this,r),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.sortByDistance_=function(e,t){var r=Object(f.i)(this.pixelCoordinate_,e.segment),i=Object(f.i)(this.pixelCoordinate_,t.segment);return r-i}.bind(this),this.rBush_=new _.a,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return o&&(e.__proto__=o),((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.addFeature=function(e,t){var r=void 0===t||t,i=Object(h.c)(e),o=e.getGeometry();if(o){var n=this.SEGMENT_WRITERS_[o.getType()];n&&(this.indexedFeaturesExtents_[i]=o.getExtent(Object(v.j)()),n.call(this,e,o))}r&&(this.featureChangeListenerKeys_[i]=Object(u.a)(e,s.a.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},e.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},e.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},e.prototype.handleEvent=function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),o.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(e){var t=p(e);this.addFeature(t)},e.prototype.handleFeatureRemove_=function(e){var t=p(e);this.removeFeature(t)},e.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var r=Object(h.c)(t);r in this.pendingFeatures_||(this.pendingFeatures_[r]=t)}else this.updateFeature_(t)},e.prototype.handleUpEvent=function(){var e=Object(l.c)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,i=Object(h.c)(t),o=this.indexedFeaturesExtents_[i];if(o){var n=this.rBush_,s=[];n.forEachInExtent(o,function(e){t===e.feature&&s.push(e)});for(var a=s.length-1;0<=a;--a)n.remove(s[a])}r&&(Object(u.e)(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])},e.prototype.setMap=function(e){var t=this.getMap(),r=this.featuresListenerKeys_,i=this.getFeatures_();t&&(r.forEach(u.e),r.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),o.prototype.setMap.call(this,e),e&&(this.features_?r.push(Object(u.a)(this.features_,n.a.ADD,this.handleFeatureAdd_,this),Object(u.a)(this.features_,n.a.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push(Object(u.a)(this.source_,c.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(u.a)(this.source_,c.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(e,t,r){var i=r.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),o=r.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),n=Object(v.b)([i,o]),s=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(s=s.filter(function(e){return e.feature.getGeometry().getType()!==y.a.CIRCLE}));var a,h,u,l,c=!1,_=null,p=null;if(0<s.length){this.pixelCoordinate_=t,s.sort(this.sortByDistance_);var d=s[0].segment,g=s[0].feature.getGeometry().getType()===y.a.CIRCLE;this.vertex_&&!this.edge_?(a=r.getPixelFromCoordinate(d[0]),h=r.getPixelFromCoordinate(d[1]),u=Object(f.h)(e,a),l=Object(f.h)(e,h),Math.sqrt(Math.min(u,l))<=this.pixelTolerance_&&(c=!0,_=l<u?d[1]:d[0],p=r.getPixelFromCoordinate(_))):this.edge_&&(_=g?Object(f.b)(t,s[0].feature.getGeometry()):Object(f.c)(t,d),p=r.getPixelFromCoordinate(_),Object(f.d)(e,p)<=this.pixelTolerance_&&(c=!0,this.vertex_&&!g&&(a=r.getPixelFromCoordinate(d[0]),h=r.getPixelFromCoordinate(d[1]),u=Object(f.h)(p,a),l=Object(f.h)(p,h),Math.sqrt(Math.min(u,l))<=this.pixelTolerance_&&(_=l<u?d[1]:d[0],p=r.getPixelFromCoordinate(_))))),c&&(p=[Math.round(p[0]),Math.round(p[1])])}return{snapped:c,vertex:_,vertexPixel:p}},e.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},e.prototype.writeCircleGeometry_=function(e,t){for(var r=Object(a.c)(t).getCoordinates()[0],i=0,o=r.length-1;i<o;++i){var n=r.slice(i,i+2),s={feature:e,segment:n};this.rBush_.insert(Object(v.b)(n),s)}},e.prototype.writeGeometryCollectionGeometry_=function(e,t){for(var r=t.getGeometriesArray(),i=0;i<r.length;++i){var o=this.SEGMENT_WRITERS_[r[i].getType()];o&&o.call(this,e,r[i])}},e.prototype.writeLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,o=r.length-1;i<o;++i){var n=r.slice(i,i+2),s={feature:e,segment:n};this.rBush_.insert(Object(v.b)(n),s)}},e.prototype.writeMultiLineStringGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,o=r.length;i<o;++i)for(var n=r[i],s=0,a=n.length-1;s<a;++s){var h=n.slice(s,s+2),u={feature:e,segment:h};this.rBush_.insert(Object(v.b)(h),u)}},e.prototype.writeMultiPointGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,o=r.length;i<o;++i){var n=r[i],s={feature:e,segment:[n,n]};this.rBush_.insert(t.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,o=r.length;i<o;++i)for(var n=r[i],s=0,a=n.length;s<a;++s)for(var h=n[s],u=0,l=h.length-1;u<l;++u){var c=h.slice(u,u+2),_={feature:e,segment:c};this.rBush_.insert(Object(v.b)(c),_)}},e.prototype.writePointGeometry_=function(e,t){var r=t.getCoordinates(),i={feature:e,segment:[r,r]};this.rBush_.insert(t.getExtent(),i)},e.prototype.writePolygonGeometry_=function(e,t){for(var r=t.getCoordinates(),i=0,o=r.length;i<o;++i)for(var n=r[i],s=0,a=n.length-1;s<a;++s){var h=n.slice(s,s+2),u={feature:e,segment:h};this.rBush_.insert(Object(v.b)(h),u)}},e}(o.b);t.a=d},1814:function(e,t,r){"use strict";r.r(t);var i=r(41);t.default=new i.a},1963:function(e,t,r){"use strict";r.r(t);var i=r(1100),o=r(1814);t.default=new i.a({source:o.default})}}]);