(window.webpackJsonp=window.webpackJsonp||[]).push([[6,277,278,288,293,294,308,309],{1807:function(e,t,n){"use strict";n.r(t),n.d(t,"SpeedProfile",function(){return r}),n.d(t,"Preference",function(){return o}),n.d(t,"MapInteractionMode",function(){return i}),n.d(t,"preferenceOptions",function(){return a}),n.d(t,"AvoidFeatureOption",function(){return l}),n.d(t,"DownloadFormat",function(){return c}),n.d(t,"RoutingResultError",function(){return u});var r=Object.freeze({CAR:{id:"CAR",i18n:"car",icon:"fa-car",orsKey:"driving-car"},HGV:{id:"HGV",i18n:"hgv",icon:"fa-truck",orsKey:"driving-hgv"},FOOT:{id:"FOOT",i18n:"foot",icon:"fa-walking",orsKey:"foot-walking"},CYCLING:{id:"CYCLING",i18n:"cycling",icon:"fa-bicycle",orsKey:"cycling-regular"},WHEELCHAIR:{id:"WHEELCHAIR",i18n:"wheelchair",icon:"fa-wheelchair",orsKey:"wheelchair"}}),o=Object.freeze({RECOMMENDED:{id:"RECOMMENDED",i18n:"recommended",orsKey:"recommended"},SHORTEST:{id:"SHORTEST",i18n:"shortest",orsKey:"shortest"}}),i=Object.freeze({WAYPOINTS:"WAYPOINTS",AVOID_AREAS:"AVOID_AREAS",DELETE_AVOID_AREAS:"DELETE_AVOID_AREAS"}),a=Object.keys(o),l=Object.freeze({HIGHWAYS:{id:"HIGHWAYS",i18n:"highways",availableProfiles:["CAR","HGV"],orsKey:"highways"},TOLLWAYS:{id:"TOLLWAYS",i18n:"tollways",availableProfiles:["CAR","HGV"],orsKey:"tollways"},FERRIES:{id:"FERRIES",i18n:"ferries",availableProfiles:["CAR","HGV","CYCLING","FOOT","WHEELCHAIR"],orsKey:"ferries"},STEPS:{id:"STEPS",i18n:"steps",availableProfiles:["CYCLING","FOOT","WHEELCHAIR"],orsKey:"steps"}}),c=Object.freeze({GEOJSON:"GEOJSON",GPX:"GPX",KML:"KML"}),u=Object.freeze({NO_ROUTE_FOUND:{i18n:"noRouteFound"},AVOID_AREA_TOO_LARGE:{i18n:"avoidAreasTooLarge"},FETCHING_FAILED:{i18n:"routeFetchFailed"},SERVICE_UNAVAILABLE:{i18n:"routeServiceUnavailable"}})},1808:function(e,t,n){"use strict";n.r(t);var r=n(41),o=n(36),i=n(63);t.default=new r.a({features:[new o.a({geometry:new i.a([]),isHighlight:!1}),new o.a({geometry:new i.a([]),isHighlight:!0})]})},1809:function(e,o,i){"use strict";i.r(o),function(t){i.d(o,"transformCoordinatesLocalToWgs84Projection",function(){return e}),i.d(o,"transformCoordinatesWgs84ToLocalProjection",function(){return r});var n=i(55);function e(e){return Object(n.e)(t.request("MapView","getProjection").getCode(),"EPSG:4326",e)}function r(e){return Object(n.e)("EPSG:4326",t.request("MapView","getProjection").getCode(),e)}}.call(this,i(4))},1852:function(e,l,c){"use strict";c.r(l),function(t){c.d(l,"default",function(){return e});var n=c(23),r=c(34);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=null;function e(e){return a=a||t.request("RoutingLGB","getSettings").routing.styleRoute,e.get("isHighlight")?new n.c({stroke:new r.a({color:[].concat(o(a.partHighlightColor),[1]),width:a.partHighlightWidth})}):[new n.c({stroke:new r.a({color:[].concat(o(a.highlightColor),[1]),width:a.highlightWidth})}),new n.c({stroke:new r.a({color:[].concat(o(a.fillColor),[1]),width:a.width})})]}}.call(this,c(4))},1892:function(e,i,I){"use strict";I.r(i),function(c,u){I.d(i,"downloadRoute",function(){return t}),I.d(i,"printRoute",function(){return n}),I.d(i,"isPrintingAvailable",function(){return r});var m=I(81),y=I(302),h=I(36),s=I(42),v=I(1809),f=I(1893),d=I(1808),g=I(1852),p=I(1807),b=I(5),e=I(14),w=I.n(e);function S(e,t,n,r,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}function A(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(!((t instanceof m.a||t instanceof y.a)&&Array.isArray(e)))return"";var n,r=[],o=A(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i instanceof h.a){var a=i.clone(),l=a.getGeometry(),c=l.getType(),u=l.getCoordinates(),s=[];if("Point"===c)s=Object(v.transformCoordinatesLocalToWgs84Projection)(u);else if("LineString"===c)s=u.map(function(e){return Object(v.transformCoordinatesLocalToWgs84Projection)(e)});else if("Polygon"===c){var f,d=A(u);try{for(d.s();!(f=d.n()).done;){var g=f.value;s.push(g.map(function(e){return Object(v.transformCoordinatesLocalToWgs84Projection)(e)}))}}catch(e){d.e(e)}finally{d.f()}}l.setCoordinates(s),r.push(a)}}}catch(e){o.e(e)}finally{o.f()}return t.writeFeatures(r)}function t(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:p.DownloadFormat.GEOJSON,o=1<arguments.length?arguments[1]:void 0,i=function(e,t){switch(t){case p.DownloadFormat.GEOJSON:return O(e,new m.a);case p.DownloadFormat.GPX:return O(e,new y.a);case p.DownloadFormat.KML:return Object(f.default)(e);default:return}}(function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=Object(g.default)(r);o[1]&&r.setStyle(o[1])}}catch(e){n.e(e)}finally{n.f()}return e}([d.default.getFeatures().find(function(e){return!e.get("isHighlight")})]),r),a=(e=r,t=o,n=w()().format("YYYYMMDD_HHmm"),(t||"route_"+n)+"."+e.toLowerCase()),l="data:text/plain;charset=utf-8,".concat(encodeURIComponent(i)),c=document.createElement("a");c.href=l,c.download=a,c.style.visibility="hidden",c.onclick=function(){return!0},document.body.appendChild(c),c.click(),document.body.removeChild(c)}function n(){var e=b.Radio.request("RoutingLGB","getRouteExtent"),t=Object(s.d)(e);t.scale(1.4);var n=b.Radio.request("Map","getLayers").getArray().filter(function(e){return!0===e.getVisible()&&("WMS"===e.getProperties().typ||"routing_route_layer"===e.get("name"))}),r=n.filter(function(e){return"WMS"===e.getProperties().typ}).map(function(e){return e.getProperties().name}),o=t.getExtent(),i="E:"+o[2].toFixed(2).toString()+", N:"+o[3].toFixed(2).toString(),a="E:"+o[0].toFixed(2).toString()+", N:"+o[1].toFixed(2).toString(),l={layout:"A4 Hochformat",outputFilename:"route",outputFormat:"pdf",attributes:{current_date:(new Date).toLocaleDateString(),shown_services:r.toString(),extent_coords_no:i,extent_coords_sw:a,map:{dpi:96,projection:b.Radio.request("MapView","getProjection").getCode(),bbox:o}}};b.Radio.trigger("MapMarker","hideWktFeature"),I.e(4).then(I.bind(null,1861)).then(function(e){var t=new e.default(l);t.buildLayers(n),t=t.toJSON(),t=c.omit(t,"uniqueIdList"),b.Radio.trigger("Print","createPrintJob","viewerapi",encodeURIComponent(JSON.stringify(t)),"pdf")}).catch(function(e){b.Radio.trigger("Alert","alert",{text:u.t("additional:routingLGB:noPrintingAvailable"),kategorie:"alert-warning"})})}function r(){return o.apply(this,arguments)}function o(){var l;return l=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.e(4).then(I.bind(null,1861));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,null,[[0,6]])}),(o=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=l.apply(e,a);function o(e){S(r,t,n,o,i,"next",e)}function i(e){S(r,t,n,o,i,"throw",e)}o(void 0)})}).apply(this,arguments)}}.call(this,I(3),I(24))},1893:function(e,y,h){"use strict";h.r(y),function(i){h.d(y,"default",function(){return m}),h.d(y,"convertFeatures",function(){return g}),h.d(y,"transformCoordinates",function(){return d});var a=h(280),t=h(38);function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e,n,r,o=(e="EPSG:25832",n="EPSG:4326",r="32",t.default.defs(e,"+proj=utm +zone="+r+"ellps=WGS84 +towgs84=0,0,0,0,0,0,1 +units=m +no_defs"),{sourceProj:Object(t.default)(e),destProj:Object(t.default)(n)}),u=[{color:"blue",value:[55,126,184]},{color:"black",value:[0,0,0]},{color:"green",value:[77,175,74]},{color:"grey",value:[153,153,153]},{color:"orange",value:[255,127,0]},{color:"red",value:[228,26,28]},{color:"white",value:[255,255,255]},{color:"yellow",value:[255,255,51]}];function E(r){var e=u.filter(function(e){return t=r,n=e.value,Array.isArray(t)&&3===t.length&&Array.isArray(n)&&3===n.length&&t.every(function(e,t){return e===n[t]});var t,n});return e&&e[0]?e[0].color:""}function s(e,t){var n,r=[],o=l(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;t?i.forEach(function(e){r.push(f(e))}):r.push(f(i))}}catch(e){o.e(e)}finally{o.f()}return t?[r]:r}function f(e){return Object(t.default)(o.sourceProj,o.destProj,e)}function d(e){var t=e.getCoordinates();switch(e.getType()){case"LineString":return s(t,!1);case"Point":return f(t);case"Polygon":return s(t,!0);default:return[]}}function g(e,t){var n,r=[],o=l(e);try{for(o.s();!(n=o.n()).done;){var i=n.value.clone(),a=d(i.getGeometry());3===a.length&&0===a[2]&&a.pop(),i.getGeometry().setCoordinates(a,"XY"),r.push(i)}}catch(e){o.e(e)}finally{o.f()}return t.writeFeatures(r)}function m(e){var t,n=e.length,p=Array(n).fill(void 0),r=new a.a({extractStyles:!0}),b=Array(n).fill(!1),w=Array(n).fill(void 0),S=Array(n).fill(!1),u=Array(n).fill(void 0),A=Array(n).fill(void 0),o=(new DOMParser).parseFromString(g(e,r),"text/xml");return e.forEach(function(e,t){var n,r,o,i=e.getGeometry().getType();if("Point"===i&&e.values_.drawState&&void 0!==e.values_.drawState.text)S[t]=!0,A[t]=e.values_.drawState.fontSize;else{try{o=e.getStyleFunction()(e),r=Array.isArray(o)?o[0]:o}catch(e){S[t]=!0}if("Point"===i)if(null!==r.getImage()&&void 0!==r.getImage().iconImage_){b[t]=!0;var a=r.getImage().anchorXUnits_,l=r.getImage().anchorYUnits_,c=r.getImage().anchor_;p[t]={xUnit:a,yUnit:l,anchor:c}}else r.getText()?u[t]=r.getText().getFont():(n=r.getImage().getFill().getColor(),w[t]=[n[0],n[1],n[2]])}}),t=o,Array.from(t.getElementsByTagName("ExtendedData")).forEach(function(e){e.getElementsByTagName("value")[0].textContent=i.request("Util","uniqueId","")}),Array.from(o.getElementsByTagName("Placemark")).forEach(function(e,t){if(0<e.getElementsByTagName("Point").length&&!1===S[t]){var n=e.getElementsByTagName("Style")[0];if(!1===b[t]&&w[t]){var r="".concat(window.location.origin,"/img/tools/draw/circle_").concat(E(w[t]),".svg"),o=(s=r,f="<scale>".concat(1,"</scale>"),d="<href>".concat(s,"</href>"),"<IconStyle>".concat(f,"<Icon>").concat(d,"</Icon></IconStyle>"));n.innerHTML+=o}else if(!0===b[t]&&void 0!==p[t]){e.getElementsByTagName("IconStyle")[0].innerHTML+=(i=p[t],a=i.anchor[0],l=i.anchor[1],c=i.xUnit,u=i.yUnit,'<hotSpot x="'.concat(a,'" y="').concat(l,'" xunits="').concat(c,'" yunits="').concat(u,'" />'))}}var i,a,l,c,u,s,f,d;if(0<e.getElementsByTagName("Point").length&&!0===S[t]&&!isNaN(A[t])){var g=A[t]/16,m=e.getElementsByTagName("Style")[0],y="".concat(window.location.origin,"/img/tools/draw/circle_blue.svg"),h=(new DOMParser).parseFromString("<IconStyle><scale>0</scale><Icon><href>"+y+"</href></Icon></IconStyle>","text/xml"),v=(new DOMParser).parseFromString("<scale>"+g+"</scale>","text/xml");m.getElementsByTagName("LabelStyle")[0].appendChild(v.getElementsByTagName("scale")[0]),m.appendChild(h.getElementsByTagName("IconStyle")[0])}}),(new XMLSerializer).serializeToString(o)}}.call(this,h(4))},1961:function(e,c,u){"use strict";u.r(c),function(e,t,n){var r=u(2152),o=u.n(r),i=u(1807),a=u(1892),l=(u(286),e.View.extend({className:"modal fade",events:{"click .btn-close":"close","submit #downloadForm":"downloadRoute"},initialize:function(){this.template=t.template(o.a),document.getElementsByClassName("masterportal-container")[0].appendChild(this.el)},render:function(){var e={i18n:n.t("additional:routingLGB",{returnObjects:!0}),downloadFormatOptions:Object.values(i.DownloadFormat)};return this.$el.html(this.template(e)),this.$("#formatPicker").selectpicker({styleBase:"btn",style:"btn-select",width:"100%"}),this.$el.on("hidden.bs.modal",this.remove.bind(this)),this},show:function(){this.render(),this.$el.modal("show"),this.$("#filename").focus()},close:function(){this.$el.modal("hide")},downloadRoute:function(e){e.preventDefault();var t=this.$("#filename").val(),n=this.$("#formatPicker").val();Object(a.downloadRoute)(n,t),this.close()}}));c.default=l}.call(this,u(5),u(3),u(24))},2152:function(e,t){e.exports='<div class="modal-dialog modal-sm" role="document">\n    <form id="downloadForm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="btn-close close" aria-label="<%= i18n.close %>" title="<%= i18n.close %>"><span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title"><%= i18n.downloadRoute %></h4>\n            </div>\n            <div class="modal-body">\n                    <div class="form-group">\n                        <label for="filename"><%= i18n.filename %></label>\n                        <input id="filename" type="text" class="form-control" placeholder="<%= i18n.filename %>" />\n                    </div>\n                    <div class="form-group">\n                        <label for="formatPicker">Format</label>\n                        <select id="formatPicker">\n                            <% _.each(downloadFormatOptions, function(option) { %>\n                                <option value="<%= option %>"><%= option %></option>\n                            <% }) %>\n                        </select>\n                    </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-close"><%= i18n.close %></button>\n                <button type="submit" class="btn btn-primary"><%= i18n.download %></button>\n            </div>\n        </div>\n    </form>\n</div>\n'}}]);