(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{1916:function(e,i,o){"use strict";o.r(i),function(e,t,n){var r=o(18).a.extend({defaults:{currentLng:"",i18nDescription:"Geben Sie im linken unteren Feld Koordinaten ein, die transformiert werden sollen. Koordinaten werden mittels Komma getrennt, mehrere Paare mittels Semikolon.<br/>Bitte beachten Sie, dass in diesem Tool abweichend von der Norm stets zuerst die Länge (Ostwert) angegeben wird.",i18nCrsSource:"Quelle",i18nCrsTarget:"Ziel",i18nCrsPlaceHolder:"Bitte wählen...",i18nCoordinateInputPlaceHolder:"Koordinaten eingeben...&#10;Beispiel für EPSG:4326:&#10;13,52;&#10;13.9234,52.437",i18nResult:"Ergebnis",isActive:!1,renderToWindow:!0,sourceCrs:null,sourceCrsValid:!1,targetCrs:null,targetCrsValid:!1,sourceCoordinates:"",sourceCoordinatesValid:!1,targetCoordinates:"",loading:!1,id:"coordinateTransform",name:"Coordinate Transform",glyphicon:"glyphicon-record",availableSourceCrs:[],availableTargetCrs:[]},initialize:function(){this.superInitialize(),this.listenTo(this,{"change:sourceCrs":this.transform,"change:targetCrs":this.transform,"change:sourceCoordinates":e.debounce(this.transform,500)}),Config.coordinateTransformSourceCrs&&(this.set("availableSourceCrs",Config.coordinateTransformSourceCrs),this.set("sourceCrs",Config.coordinateTransformSourceCrs[0])),Config.coordinateTransformTargetCrs&&(this.set("availableTargetCrs",Config.coordinateTransformTargetCrs),this.set("targetCrs",Config.coordinateTransformTargetCrs[0])),this.listenTo(t.channel("i18next"),{languageChanged:this.changeLang})},fetchCrsInfo:function(e,t){var n=this,r="https://epsg.io/?q="+e.term+"&format=json";fetch(r).then(function(e){return e.json()}).then(function(e){return t(n.formatResponse(e))}).catch(function(e){return t(["Fehler bei der Abfrage: "+e])})},formatResponse:function(e){return e.results.map(function(e){return{label:"EPSG:"+e.code+", "+e.name,value:e.code}})},transform:function(){var n=this;if(this.isValid()){var e=this.get("sourceCoordinates");e.endsWith(";")&&(e=e.substring(0,e.length-1));var t="https://epsg.io/trans?data="+e+"&s_srs="+this.get("sourceCrs")+"&t_srs="+this.get("targetCrs");this.set("targetCoordinates",""),this.set("loading",!0),fetch(t).then(function(e){return e.json()}).then(function(e){var t=[];Array.isArray(e)?e.forEach(function(e){t.push(e.x+", "+e.y)}):t.push(e.x+", "+e.y),n.set("targetCoordinates",t.join("\n"))}).catch(function(){n.set("sourceCoordinatesValid",!1),n.set("targetCoordinates","")}).finally(function(){return n.set("loading",!1)})}},isValid:function(){var e=this.get("sourceCoordinates"),t=this.get("sourceCrs"),n=this.get("targetCrs"),r=!!(t&&0<t.length),i=!!(n&&0<n.length),o=e&&e.split&&e.split(";")[e.endsWith(";")?e.split(";").length-2:e.split(";").length-1],s=!(!(e&&2<e.length&&1<o.split(",").length&&""!==e.split(",")[e.split(",").length-1].trim())||o.endsWith(","));return this.set("sourceCrsValid",r),this.set("targetCrsValid",i),this.set("sourceCoordinatesValid",s),r&&i&&s},changeLang:function(e){this.set({i18nChooseCrsByTyping:n.t("additional:coordinateTransform.i18nChooseCrsByTyping"),i18nChooseCrsBySelecting:n.t("additional:coordinateTransform.i18nChooseCrsBySelecting"),i18nDescription:n.t("additional:coordinateTransform.i18nDescription"),i18nCrsSource:n.t("additional:coordinateTransform.i18nCrsSource"),i18nCrsTarget:n.t("additional:coordinateTransform.i18nCrsTarget"),i18nCrsPlaceHolder:n.t("additional:coordinateTransform.i18nCrsPlaceHolder"),i18nCoordinateInputPlaceHolder:n.t("additional:coordinateTransform.i18nCoordinateInputPlaceHolder"),i18nResult:n.t("additional:coordinateTransform.i18nResult"),currentLng:e})}});i.default=r}.call(this,o(3),o(4),o(24))}}]);