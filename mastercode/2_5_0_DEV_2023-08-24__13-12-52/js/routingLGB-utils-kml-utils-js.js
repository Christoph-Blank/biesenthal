(window.webpackJsonp=window.webpackJsonp||[]).push([[293],{1893:function(e,d,v){"use strict";v.r(d),function(o){v.d(d,"default",function(){return m}),v.d(d,"convertFeatures",function(){return y}),v.d(d,"transformCoordinates",function(){return g});var l=v(280),t=v(38);function i(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return l=e.done,e},e:function(e){i=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(i)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var e,r,n,a=(e="EPSG:25832",r="EPSG:4326",n="32",t.default.defs(e,"+proj=utm +zone="+n+"ellps=WGS84 +towgs84=0,0,0,0,0,0,1 +units=m +no_defs"),{sourceProj:Object(t.default)(e),destProj:Object(t.default)(r)}),u=[{color:"blue",value:[55,126,184]},{color:"black",value:[0,0,0]},{color:"green",value:[77,175,74]},{color:"grey",value:[153,153,153]},{color:"orange",value:[255,127,0]},{color:"red",value:[228,26,28]},{color:"white",value:[255,255,255]},{color:"yellow",value:[255,255,51]}];function A(n){var e=u.filter(function(e){return t=n,r=e.value,Array.isArray(t)&&3===t.length&&Array.isArray(r)&&3===r.length&&t.every(function(e,t){return e===r[t]});var t,r});return e&&e[0]?e[0].color:""}function s(e,t){var r,n=[],a=i(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;t?o.forEach(function(e){n.push(f(e))}):n.push(f(o))}}catch(e){a.e(e)}finally{a.f()}return t?[n]:n}function f(e){return Object(t.default)(a.sourceProj,a.destProj,e)}function g(e){var t=e.getCoordinates();switch(e.getType()){case"LineString":return s(t,!1);case"Point":return f(t);case"Polygon":return s(t,!0);default:return[]}}function y(e,t){var r,n=[],a=i(e);try{for(a.s();!(r=a.n()).done;){var o=r.value.clone(),l=g(o.getGeometry());3===l.length&&0===l[2]&&l.pop(),o.getGeometry().setCoordinates(l,"XY"),n.push(o)}}catch(e){a.e(e)}finally{a.f()}return t.writeFeatures(n)}function m(e){var t,r=e.length,p=Array(r).fill(void 0),n=new l.a({extractStyles:!0}),S=Array(r).fill(!1),w=Array(r).fill(void 0),I=Array(r).fill(!1),u=Array(r).fill(void 0),b=Array(r).fill(void 0),a=(new DOMParser).parseFromString(y(e,n),"text/xml");return e.forEach(function(e,t){var r,n,a,o=e.getGeometry().getType();if("Point"===o&&e.values_.drawState&&void 0!==e.values_.drawState.text)I[t]=!0,b[t]=e.values_.drawState.fontSize;else{try{a=e.getStyleFunction()(e),n=Array.isArray(a)?a[0]:a}catch(e){I[t]=!0}if("Point"===o)if(null!==n.getImage()&&void 0!==n.getImage().iconImage_){S[t]=!0;var l=n.getImage().anchorXUnits_,i=n.getImage().anchorYUnits_,c=n.getImage().anchor_;p[t]={xUnit:l,yUnit:i,anchor:c}}else n.getText()?u[t]=n.getText().getFont():(r=n.getImage().getFill().getColor(),w[t]=[r[0],r[1],r[2]])}}),t=a,Array.from(t.getElementsByTagName("ExtendedData")).forEach(function(e){e.getElementsByTagName("value")[0].textContent=o.request("Util","uniqueId","")}),Array.from(a.getElementsByTagName("Placemark")).forEach(function(e,t){if(0<e.getElementsByTagName("Point").length&&!1===I[t]){var r=e.getElementsByTagName("Style")[0];if(!1===S[t]&&w[t]){var n="".concat(window.location.origin,"/img/tools/draw/circle_").concat(A(w[t]),".svg"),a=(s=n,f="<scale>".concat(1,"</scale>"),g="<href>".concat(s,"</href>"),"<IconStyle>".concat(f,"<Icon>").concat(g,"</Icon></IconStyle>"));r.innerHTML+=a}else if(!0===S[t]&&void 0!==p[t]){e.getElementsByTagName("IconStyle")[0].innerHTML+=(o=p[t],l=o.anchor[0],i=o.anchor[1],c=o.xUnit,u=o.yUnit,'<hotSpot x="'.concat(l,'" y="').concat(i,'" xunits="').concat(c,'" yunits="').concat(u,'" />'))}}var o,l,i,c,u,s,f,g;if(0<e.getElementsByTagName("Point").length&&!0===I[t]&&!isNaN(b[t])){var y=b[t]/16,m=e.getElementsByTagName("Style")[0],d="".concat(window.location.origin,"/img/tools/draw/circle_blue.svg"),v=(new DOMParser).parseFromString("<IconStyle><scale>0</scale><Icon><href>"+d+"</href></Icon></IconStyle>","text/xml"),h=(new DOMParser).parseFromString("<scale>"+y+"</scale>","text/xml");m.getElementsByTagName("LabelStyle")[0].appendChild(h.getElementsByTagName("scale")[0]),m.appendChild(v.getElementsByTagName("IconStyle")[0])}}),(new XMLSerializer).serializeToString(a)}}.call(this,v(4))}}]);