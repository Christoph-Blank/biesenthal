(window.webpackJsonp=window.webpackJsonp||[]).push([[239],{1848:function(e,t,i){"use strict";i.r(t),function(n,a){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,i)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}i.d(t,"ThemedMapFuncs",function(){return r});var r={applyThemedMap:function(e){e.layers.forEach(function(e){var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){l(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e),r=e.opacity?-100*e.opacity+100:0;t.isSelected=e.visible,t.visibility=e.visible,t.transparency=r,t.name=e.title,t.id=e.uuid+"-"+Math.floor(100*Math.random()),t.tilesize=e.tilesize?e.tilesize:256,t.gfiAttributes=e.gfiAttributes?e.gfiAttributes:"showAll",n.Radio.trigger("Parser","addWmsLayer",t);var i=a.request("ModelList","getModelByAttributes",{name:e.title}).get("id");a.trigger("ModelList","setModelAttributesById",i,{bbServiceUuid:e.uuid}),a.trigger("ModelList","setModelAttributesById",i,{bbThemedMapLayer:!0})}),n.Radio.trigger("Map","zoomToExtent",e.extent)},getExternalLayerModels:function(){var e=a.request("ModelList","getCollection"),t=e.where({type:"layer"}),r=e.where({type:"folder"});return[].concat(t,r).filter(function(e){var t=e.toJSON();return t.importModule&&"importWmsExternal"===t.importLayerType||t.bbThemedMapLayer})},getExternalLayers:function(){var e=r.getExternalLayerModels();return e.sort(function(e,t){return e.get("selectionIDX")-t.get("selectionIDX")}),e.map(function(e){var t=e.toJSON(),r="ignore"===t.legendURL?void 0:t.legendURL;return{uuid:t.bbServiceUuid,url:t.url,layers:t.layers,title:t.name,transparent:t.transparent,opacity:Number((1-t.transparency/100).toFixed(2)),visible:t.isSelected,legendURL:r,tilesize:t.tilesize,gfiAttributes:t.gfiAttributes}})},removeExternalLayers:function(){var e=r.getExternalLayerModels();n.Radio.trigger("MapMarker","hideWktFeature"),e.forEach(function(e){n.Radio.trigger("ClassicTree","removeLayerById",e.get("id"))})},getThemedMapConf:function(){var e=a.request("Map","getMap"),t={};return t.extent=e.getView().calculateExtent(),t.layers=r.getExternalLayers(),t}};t.default=r}.call(this,i(5),i(4))}}]);