(window.webpackJsonp=window.webpackJsonp||[]).push([[260,246,257,262,263,264,270],{1823:function(e,t,n){"use strict";n.r(t);var r=n(41);t.default=new r.a},1828:function(e,t,c){"use strict";c.r(t),function(n){c.d(t,"default",function(){return e});var r=c(23),i=c(37),a=c(34);function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=null;function e(e){l=l||n.request("Reachability","getSettings").isochrones.styleAreas;var t=e.get("color");return new r.c({fill:new i.a({color:[].concat(o(t),[l.opacity])}),stroke:new a.a({color:l.lineColor,width:l.lineWidth})})}}.call(this,c(4))},1838:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"default",function(){return r});var r=function(){function r(e,t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.lat=e,this.lng=t,this.displayName=n,this.coordinates=[]}var e,t,n;return e=r,(t=[{key:"getLat",value:function(){return this.lat}},{key:"setLat",value:function(e){this.lat=e}},{key:"getLng",value:function(){return this.lng}},{key:"setLng",value:function(e){this.lng=e}},{key:"getDisplayName",value:function(){return this.displayName}},{key:"setDisplayName",value:function(e){this.displayName=e}},{key:"getCoordinates",value:function(){return this.coordinates}},{key:"setCoordinates",value:function(e){this.coordinates=e}}])&&i(e.prototype,t),n&&i(e,n),r}()},1839:function(e,c,u){"use strict";u.r(c),function(e){u.d(c,"default",function(){return l});var t=u(23),n=u(78),r=u(34),i=u(37);function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=null;function l(){return s=s||e.request("Reachability","getSettings").isochrones.styleStartingPoint,new t.c({image:new n.a({radius:s.radius,stroke:new r.a({color:[].concat(a(s.lineColor),[1]),width:s.lineWidth}),fill:new i.a({color:[].concat(a(s.fillColor),[s.opacity])})})})}}.call(this,u(4))},1849:function(e,h,g){"use strict";g.r(h),function(a){g.d(h,"default",function(){return m}),g.d(h,"convertFeatures",function(){return p}),g.d(h,"transformCoordinates",function(){return f});var o=g(280),t=g(38);function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var e,n,r,i=(e="EPSG:25832",n="EPSG:4326",r="32",t.default.defs(e,"+proj=utm +zone="+r+"ellps=WGS84 +towgs84=0,0,0,0,0,0,1 +units=m +no_defs"),{sourceProj:Object(t.default)(e),destProj:Object(t.default)(n)}),c=[{color:"blue",value:[55,126,184]},{color:"black",value:[0,0,0]},{color:"green",value:[77,175,74]},{color:"grey",value:[153,153,153]},{color:"orange",value:[255,127,0]},{color:"red",value:[228,26,28]},{color:"white",value:[255,255,255]},{color:"yellow",value:[255,255,51]}];function S(r){var e=c.filter(function(e){return t=r,n=e.value,Array.isArray(t)&&3===t.length&&Array.isArray(n)&&3===n.length&&t.every(function(e,t){return e===n[t]});var t,n});return e&&e[0]?e[0].color:""}function u(e,t){var n,r=[],i=s(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;t?a.forEach(function(e){r.push(d(e))}):r.push(d(a))}}catch(e){i.e(e)}finally{i.f()}return t?[r]:r}function d(e){return Object(t.default)(i.sourceProj,i.destProj,e)}function f(e){var t=e.getCoordinates();switch(e.getType()){case"LineString":return u(t,!1);case"Point":return d(t);case"Polygon":return u(t,!0);default:return[]}}function p(e,t){var n,r=[],i=s(e);try{for(i.s();!(n=i.n()).done;){var a=n.value.clone(),o=f(a.getGeometry());3===o.length&&0===o[2]&&o.pop(),a.getGeometry().setCoordinates(o,"XY"),r.push(a)}}catch(e){i.e(e)}finally{i.f()}return t.writeFeatures(r)}function m(e){var t,n=e.length,y=Array(n).fill(void 0),r=new o.a({extractStyles:!0}),b=Array(n).fill(!1),w=Array(n).fill(void 0),x=Array(n).fill(!1),c=Array(n).fill(void 0),O=Array(n).fill(void 0),i=(new DOMParser).parseFromString(p(e,r),"text/xml");return e.forEach(function(e,t){var n,r,i,a=e.getGeometry().getType();if("Point"===a&&e.values_.drawState&&void 0!==e.values_.drawState.text)x[t]=!0,O[t]=e.values_.drawState.fontSize;else{try{i=e.getStyleFunction()(e),r=Array.isArray(i)?i[0]:i}catch(e){x[t]=!0}if("Point"===a)if(null!==r.getImage()&&void 0!==r.getImage().iconImage_){b[t]=!0;var o=r.getImage().anchorXUnits_,s=r.getImage().anchorYUnits_,l=r.getImage().anchor_;y[t]={xUnit:o,yUnit:s,anchor:l}}else r.getText()?c[t]=r.getText().getFont():(n=r.getImage().getFill().getColor(),w[t]=[n[0],n[1],n[2]])}}),t=i,Array.from(t.getElementsByTagName("ExtendedData")).forEach(function(e){e.getElementsByTagName("value")[0].textContent=a.request("Util","uniqueId","")}),Array.from(i.getElementsByTagName("Placemark")).forEach(function(e,t){if(0<e.getElementsByTagName("Point").length&&!1===x[t]){var n=e.getElementsByTagName("Style")[0];if(!1===b[t]&&w[t]){var r="".concat(window.location.origin,"/img/tools/draw/circle_").concat(S(w[t]),".svg"),i=(u=r,d="<scale>".concat(1,"</scale>"),f="<href>".concat(u,"</href>"),"<IconStyle>".concat(d,"<Icon>").concat(f,"</Icon></IconStyle>"));n.innerHTML+=i}else if(!0===b[t]&&void 0!==y[t]){e.getElementsByTagName("IconStyle")[0].innerHTML+=(a=y[t],o=a.anchor[0],s=a.anchor[1],l=a.xUnit,c=a.yUnit,'<hotSpot x="'.concat(o,'" y="').concat(s,'" xunits="').concat(l,'" yunits="').concat(c,'" />'))}}var a,o,s,l,c,u,d,f;if(0<e.getElementsByTagName("Point").length&&!0===x[t]&&!isNaN(O[t])){var p=O[t]/16,m=e.getElementsByTagName("Style")[0],h="".concat(window.location.origin,"/img/tools/draw/circle_blue.svg"),g=(new DOMParser).parseFromString("<IconStyle><scale>0</scale><Icon><href>"+h+"</href></Icon></IconStyle>","text/xml"),v=(new DOMParser).parseFromString("<scale>"+p+"</scale>","text/xml");m.getElementsByTagName("LabelStyle")[0].appendChild(v.getElementsByTagName("scale")[0]),m.appendChild(g.getElementsByTagName("IconStyle")[0])}}),(new XMLSerializer).serializeToString(i)}}.call(this,g(4))},1853:function(e,c,u){"use strict";u.r(c),function(d,f){u.d(c,"fetchCoordinatesByText",function(){return n}),u.d(c,"fetchTextByCoordinates",function(){return o}),u.d(c,"fetchSuggestionsByText",function(){return i});var e=u(195),p=u.n(e),m=u(1800),h=u(1838);function l(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function t(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){l(r,t,n,i,a,"next",e)}function a(e){l(r,t,n,i,a,"throw",e)}i(void 0)})}}function n(e){return r.apply(this,arguments)}function r(){return(r=t(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.search,r=d.request("Reachability","getSettings").geosearch,i=[],n.length<r.minChars)return e.abrupt("return",i);e.next=5;break;case 5:return e.prev=5,a=r.serviceId,o=d.request("RestReader","getServiceById",a).get("url"),s="".concat(o,"?count=").concat(r.limit,"&properties=text"),l="&query=".concat(encodeURIComponent(n)),e.next=12,p.a.get(s+l);case 12:if(200===(c=e.sent).status||c.data.success){e.next=15;break}throw new Error({status:c.status,message:c.statusText});case 15:(i=c.data.features.map(function(e){return g(e)})).forEach(function(e){var t=Object(m.transformCoordinatesWgs84ToLocalProjection)([e.getLng(),e.getLat()]);e.setCoordinates(t)}),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(5);case 21:return e.abrupt("return",i);case 22:case"end":return e.stop()}},e,null,[[5,19]])}))).apply(this,arguments)}function i(e){return a.apply(this,arguments)}function a(){return(a=t(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.request("Reachability","getSettings").geosearch,r=[],t.length<n.minChars)return e.abrupt("return",r);e.next=4;break;case 4:return e.prev=4,i=n.serviceId,a=d.request("RestReader","getServiceById",i).get("url").replace("geosearch.json","suggest"),o="".concat(a,"?count=").concat(n.limit,"&properties=text"),s="&query=".concat(encodeURIComponent(t)),e.next=11,p.a.get(o+s);case 11:if(200===(l=e.sent).status||l.data){e.next=14;break}throw new Error({status:l.status,message:l.statusText});case 14:r=l.data.map(function(e){return e.suggestion}),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(4);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,null,[[4,17]])}))).apply(this,arguments)}function o(e){return s.apply(this,arguments)}function s(){return(s=t(regeneratorRuntime.mark(function e(t){var n,r,i,a,o,s,l,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,r=d.request("Reachability","getSettings").geosearchReverse,i=r.serviceId,a=r.filter,o=d.request("RestReader","getServiceById",i).get("url"),s="&filter="+(a||"typ:haus"),l="".concat(o,"?lon=").concat(t[0],"&lat=").concat(t[1],"&count=1&properties=text&distance=").concat(r.distance).concat(s),e.next=10,p.a.get(l);case 10:if(200===(c=e.sent).status||c.data.success){e.next=13;break}throw new Error({status:c.status,message:c.statusText});case 13:if(f.isEmpty(c.data.features))return e.abrupt("return",new h.default(t[0],t[1]));e.next=15;break;case 15:n=g(c.data.features[0]),u=Object(m.transformCoordinatesWgs84ToLocalProjection)([n.getLng(),n.getLat()]),n.setCoordinates(u),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(1);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}},e,null,[[1,20]])}))).apply(this,arguments)}function g(e){return new h.default(Number(e.geometry.coordinates[1]),Number(e.geometry.coordinates[0]),e.properties.text)}}.call(this,u(4),u(3))},1858:function(e,t,n){"use strict";n.r(t),n.d(t,"downloadAreas",function(){return a});var m=n(81),h=n(36),g=n(1800),r=n(1849),c=n(1798),i=n(14),u=n.n(i),d=n(1823),f=n(1828);function v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){switch(t){case c.DownloadFormat.GEOJSON:return function(e,t){if(!(t instanceof m.a&&Array.isArray(e)))return"";var n,r=[],i=v(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a instanceof h.a){var o=a.clone(),s=o.getGeometry(),l=s.getType(),c=s.getCoordinates(),u=[];if("Point"===l)u=Object(g.transformCoordinatesLocalToWgs84Projection)(c);else if("LineString"===l)u=c.map(function(e){return Object(g.transformCoordinatesLocalToWgs84Projection)(e)});else if("Polygon"===l){var d,f=v(c);try{for(f.s();!(d=f.n()).done;){var p=d.value;u.push(p.map(function(e){return Object(g.transformCoordinatesLocalToWgs84Projection)(e)}))}}catch(e){f.e(e)}finally{f.f()}}s.setCoordinates(u),r.push(o)}}}catch(e){i.e(e)}finally{i.f()}return t.writeFeatures(r)}(e,new m.a);case c.DownloadFormat.KML:return Object(r.default)(e);default:return}}function a(){var e,t,n,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:c.DownloadFormat.GEOJSON,i=1<arguments.length?arguments[1]:void 0,a=p(function(e){var t,n=v(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=Object(f.default)(r);i[1]&&r.setStyle(i[1])}}catch(e){n.e(e)}finally{n.f()}return e}(d.default.getFeatures()),r),o=(e=r,t=i,n=u()().format("YYYYMMDD_HHmm"),(t||"reachability_"+n)+"."+e.toLowerCase());if("function"==typeof navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(new Blob([a],{type:"text/plain;charset=utf-8"}),o);else{var s="data:text/plain;charset=utf-8,".concat(encodeURIComponent(a)),l=document.createElement("a");l.href=s,l.download=o,l.style.visibility="hidden",l.onclick=function(){return!0},document.body.appendChild(l),l.click(),document.body.removeChild(l)}}},1882:function(e,l,c){"use strict";c.r(l),function(e,t,n){var r=c(2088),i=c.n(r),a=c(1798),o=c(1858),s=(c(286),e.View.extend({className:"modal fade",events:{"click .btn-close":"close","submit #downloadForm":"download"},initialize:function(){this.template=t.template(i.a),document.getElementsByClassName("masterportal-container")[0].appendChild(this.el)},render:function(){var e={i18n:n.t("additional:reachability",{returnObjects:!0}),downloadFormatOptions:Object.values(a.DownloadFormat)};return this.$el.html(this.template(e)),this.$("#formatPicker").selectpicker({styleBase:"btn",style:"btn-select",width:"100%"}),this.$el.on("hidden.bs.modal",this.remove.bind(this)),this},show:function(){this.render(),this.$el.modal("show")},close:function(){this.$el.modal("hide")},download:function(e){e.preventDefault();var t=this.$("#filename").val(),n=this.$("#formatPicker").val();Object(o.downloadAreas)(n,t),this.close()}}));l.default=s}.call(this,c(5),c(3),c(24))},1883:function(e,t,n){"use strict";n.r(t);var r=n(1799),i=n(1839),a=n(43);t.default=new a.a({source:r.default,style:i.default,name:"reachability_startingpoint_layer",alwaysOnTop:!0})},1884:function(e,t,n){"use strict";n.r(t);var r=n(362),i=n(1799);t.default=new r.a({source:i.default})},1885:function(e,t,n){"use strict";n.r(t);var r=n(1100),i=n(1799);t.default=new r.a({source:i.default})},1886:function(e,t,n){"use strict";n.r(t);var r=n(241),i=n(1839),a=n(1799);t.default=new r.b({source:a.default,type:"Point",style:i.default})},1887:function(e,t,n){"use strict";n.r(t);var r=n(1823),i=n(1828),a=n(43);t.default=new a.a({source:r.default,style:i.default,name:"isochrones_area_layer",alwaysOnTop:!0,opacity:.65})},1950:function(e,d,f){"use strict";f.r(d),function(e,t,r){var a=f(5),n=f(2100),i=f.n(n),o=(f(1881),f(1838)),s=f(1853);function l(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function c(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){l(r,t,n,i,a,"next",e)}function a(e){l(r,t,n,i,a,"throw",e)}i(void 0)})}}var u=e.View.extend({model:null,template:t.template(i.a),events:{"focus input":"onInputFocus","click .starting-point-remove":"onStartingPointRemoved","mousedown .geolocation":"onGeolocationSet"},initialize:function(){this.listenTo(this.model,"changeCoordinates",this.render)},render:function(){var n,e={startingPoint:this.model.toJSON(),isGeolocationAvailable:this.isGeolocationAvailable(),i18n:r.t("additional:reachability",{returnObjects:!0})};return this.$el.html(this.template(e)),this.$(".typeahead").typeahead({source:(n=c(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.fetchCoordinatesByText)({search:t});case 2:r=e.sent,n(r.map(function(e){return{searchResult:e,name:e.displayName}}));case 4:case"end":return e.stop()}},e)})),function(e,t){return n.apply(this,arguments)}),autoSelect:!0,fitToElement:!0,matcher:function(){return!0},updater:this.selectSearchResult.bind(this)}),this.delegateEvents(),this},isGeolocationAvailable:function(){return"geolocation"in navigator},onInputFocus:function(e){e.target.select()},onStartingPointRemoved:function(){this.model.reset(),a.Radio.trigger("Reachability","findIsochrones")},onGeolocationSet:function(){var i=this;this.isGeolocationAvailable()?(this.$(".geolocation").removeClass("not-available"),this.$(".geolocation").addClass("fa-spinner fa-spin loading-geolocation"),this.$("input").addClass("loading-geolocation"),navigator.geolocation.getCurrentPosition(function(){var t=c(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[t.coords.longitude,t.coords.latitude],e.next=3,Object(s.fetchTextByCoordinates)(n);case 3:r=e.sent,i.model.setFromGeosearchResult(r),a.Radio.trigger("Reachability","findIsochrones");case 6:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),function(e){i.$("input").removeClass("loading-geolocation"),i.$(".geolocation").removeClass("fa-spinner fa-spin loading-geolocation"),i.$(".geolocation").addClass("not-available"),i.$("input").focus(),a.Radio.trigger("Alert","alert",{kategorie:"alert-info",text:r.t("additional:reachability:noGeolocation")})})):a.Radio.trigger("Alert","alert",{kategorie:"alert-info",text:r.t("additional:reachability:noGeolocation")})},selectSearchResult:function(e){var t=e.searchResult;t instanceof o.default&&(this.model.setFromGeosearchResult(t),a.Radio.trigger("Reachability","findIsochrones"))}});d.default=u}.call(this,f(5),f(3),f(24))},1951:function(e,l,c){"use strict";c.r(l),function(e,t,n,r){var i=c(2101),a=c.n(i),o=c(1798),s=e.View.extend({model:null,template:t.template(a.a),events:{"click .speed-profile-option":"onSpeedProfileSelected"},initialize:function(){this.listenTo(this.model,"change:speedProfile",this.render)},render:function(){var e=t.extend(this.model.toJSON(),{speedProfiles:Object.values(o.SpeedProfile),i18n:n.t("additional:reachability",{returnObjects:!0})});return this.$el.html(this.template(e)),this.delegateEvents(),this},onSpeedProfileSelected:function(e){this.model.setSpeedProfile(r(e.currentTarget).children("input:first").val())}});l.default=s}.call(this,c(5),c(3),c(24),c(10))},1952:function(e,l,c){"use strict";c.r(l),function(e,a,o,r){var t=c(2102),n=c.n(t),s=c(1798);var i=e.View.extend({model:null,template:a.template(n.a),events:{"change .avoid-feature-option":"onAvoidFeatureChanged","change .optimization-option":"onOptimizationChanged","input #slider1":"onSlider1Input","input #slider2":"onSlider2Input","change #slider1":"onSlider1Changed","change #slider2":"onIntervalChanged"},initialize:function(){this.listenTo(this.model,{"change:speedProfile":this.render,"change:time":this.render,"change:distance":this.render,"change:interval change:maxInterval change:minInterval":this.render,"change:optimization":this.render})},render:function(){var e,t,n,r=this.model.getOptimization()===s.Optimization.TIME.id,i=a.extend(this.model.toJSON(),(e={i18n:o.t("additional:reachability",{returnObjects:!0}),availableOptimizations:Object.values(s.Optimization),availableAvoidFeatureOptions:this.model.getAvailableAvoidFeatureOptions(),Optimization:s.Optimization,sliderMin:r?this.model.getMinTime():this.model.getMinDistance(),sliderMax:r?this.model.getMaxTime():this.model.getMaxDistance(),sliderCurrent:r?this.model.getTime():this.model.getDistance()},t="Optimization",n=s.Optimization,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e));return this.$el.html(this.template(i)),this.delegateEvents(),this},onSlider1Input:function(e){var t=r(e.target);this.$("#slider1Value").html(t.val())},onSlider2Input:function(e){var t=r(e.target);this.$("#slider2Value").html(t.val())},onSlider1Changed:function(e){var t=this.model.getOptimization()===s.Optimization.TIME.id,n=r(e.target);t?this.model.setTime(n.val()):this.model.setDistance(n.val()),this.model.findIsochrones()},onIntervalChanged:function(e){var t=r(e.target);this.model.setInterval(t.val()),this.model.findIsochrones()},onOptimizationChanged:function(e){var t=r(e.target);t.is(":checked")&&this.model.setOptimization(t.val())},onAvoidFeatureChanged:function(e){this.model.toggleAvoidFeatureOption(r(e.target).val())}});l.default=i}.call(this,c(5),c(3),c(24),c(10))},1953:function(e,c,u){"use strict";u.r(c),function(e,t,r){var i=u(5),n=(u(308),u(2103)),a=u.n(n),o=u(1798),s=u(1882),l=e.View.extend({model:null,template:t.template(a.a),events:{"click #downloadButton":"download"},initialize:function(){this.listenTo(this.model,"change:isochronesResult",this.render),this.listenTo(this.model,"change:isLoadingIsochrones",this.render)},render:function(){return this.$el.html(this.template(this.buildTemplateAttributes())),this.delegateEvents(),this},buildTemplateAttributes:function(){var e=r.t("additional:reachability",{returnObjects:!0}),t={isLoading:this.model.isLoadingIsochrones(),info:"",error:null,result:this.model.getIsochronesResult(),speedProfile:o.SpeedProfile[this.model.getSpeedProfile()],downloadFormatOptions:Object.values(o.DownloadFormat),Optimization:o.Optimization,legendOpacity:i.Radio.request("Reachability","getSettings").isochrones.styleAreas.opacity,i18n:e};if(this.model.getIsochronesResult()){if(this.model.getIsochronesResult().getError()){var n=this.model.getIsochronesResult().getError();t.error=e[n.i18n]}}else t.info=e.noResultYet;return t},download:function(){(new s.default).show()}});c.default=l}.call(this,u(5),u(3),u(24))},1954:function(e,g,v){"use strict";v.r(g),function(e){var t=v(1823),n=v(1883),r=v(1884),i=v(1885),a=v(1886),o=v(36),s=v(42),l=v(5),c=v(1853),u=v(1800),d=v(1887),f=v(1799);function p(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function m(s){return function(){var e=this,o=arguments;return new Promise(function(t,n){var r=s.apply(e,o);function i(e){p(r,t,n,i,a,"next",e)}function a(e){p(r,t,n,i,a,"throw",e)}i(void 0)})}}var h=e.View.extend({model:null,isMapListenerAdded:!1,initialize:function(){this.listenTo(this.model,{"change:isochronesResult":this.updateArea}),l.Radio.channel("Reachability").on({zoomToArea:this.zoomToArea},this)},initIsochrones:function(e){if(e){this.isMapListenerAdded||(a.default.on("drawend",this.onStartingPointDrawEnd.bind(this)),this.createWaypointsModifyInteractionListener(),this.isMapListenerAdded=!0);var t=l.Radio.request("Map","getLayers");l.Radio.trigger("Map","addLayerToIndex",[d.default,t.getArray().length]),l.Radio.trigger("Map","addLayerToIndex",[n.default,t.getArray().length+1]),this.createWaypointsDrawInteraction()}else this.closeIsochrones()},closeIsochrones:function(){l.Radio.trigger("Map","removeLayer",n.default),l.Radio.trigger("Map","removeLayer",d.default),this.removeMapInteractions()},zoomToArea:function(){l.Radio.trigger("Map","zoomToExtent",t.default.getExtent())},createWaypointsModifyInteractionListener:function(){var a=this;r.default.on("modifyend",m(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.model.getStartingPoint(),n=t.getCoordinates(),r=Object(u.transformCoordinatesLocalToWgs84Projection)(n),e.next=5,Object(c.fetchTextByCoordinates)(r);case 5:i=e.sent,t.setDisplayName(null==i?void 0:i.getDisplayName()),a.model.findIsochrones();case 8:case"end":return e.stop()}},e)})))},onStartingPointDrawEnd:function(a){var o=this;return m(regeneratorRuntime.mark(function e(){var t,n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.model.getStartingPoint(),n=a.feature.getGeometry().getCoordinates(),r=Object(u.transformCoordinatesLocalToWgs84Projection)(n),e.next=5,Object(c.fetchTextByCoordinates)(r);case 5:i=e.sent,f.default.removeFeature(a.feature),t.setDisplayName(null==i?void 0:i.getDisplayName()),t.setCoordinates(n),o.model.findIsochrones();case 10:case"end":return e.stop()}},e)}))()},updateArea:function(){t.default.clear();var e=this.model.getIsochronesResult();e&&!e.getError()&&(t.default.addFeatures(e.getAreas().map(function(e){return new o.a({geometry:new s.b(e.getCoordinates()),value:e.getValue(),maximum:e.getMaximum(),interval:e.getInterval(),speedProfile:e.getSpeedProfile(),optimization:e.getOptimization(),color:e.getColor(),avoidSpeedProfileOptions:e.getAvoidSpeedProfileOptions()})})),this.zoomToArea())},createWaypointsDrawInteraction:function(){this.removeMapInteractions(),l.Radio.trigger("Map","addInteraction",a.default),l.Radio.trigger("Map","addInteraction",r.default),l.Radio.trigger("Map","addInteraction",i.default)},removeWaypointsDrawInteraction:function(){l.Radio.trigger("Map","removeInteraction",a.default),l.Radio.trigger("Map","removeInteraction",r.default),l.Radio.trigger("Map","removeInteraction",i.default)},removeMapInteractions:function(){this.removeWaypointsDrawInteraction()}});g.default=h}.call(this,v(5))},2066:function(e,f,p){"use strict";p.r(f),function(e,t,n){var r=p(2150),i=p.n(r),a=p(1980),o=p(1950),s=p(1951),l=p(1952),c=p(1953),u=p(1954),d=e.View.extend({model:null,speedProfilesView:null,startingPointView:null,optionsView:null,resultsView:null,mapView:null,template:t.template(i.a),initialize:function(){var e=n.request("ModelList","getModelByAttributes",{id:"reachability"}).attributes;this.model=new a.default(e),this.speedProfilesView=new s.default({model:this.model}),this.startingPointView=new o.default({model:this.model.getStartingPoint()}),this.optionsView=new l.default({model:this.model}),this.resultsView=new c.default({model:this.model}),this.mapView=new u.default({model:this.model}),this.listenTo(this.model,"change:isActive",this.render),this.listenTo(n.channel("i18next"),{languageChanged:this.render})},render:function(){var e=this.model.get("isActive");if(this.mapView.initIsochrones(e),e)return this.setElement(document.getElementsByClassName("win-body")[0]),this.$el.html(this.template()),this.$("#speed-profiles").html(this.speedProfilesView.render().el),this.$("#starting-point").html(this.startingPointView.render().el),this.$("#options").html(this.optionsView.render().el),this.$("#results").html(this.resultsView.render().el),this}});f.default=d}.call(this,p(5),p(3),p(4))},2088:function(e,t){e.exports='<div class="modal-dialog modal-sm" role="document">\n    <form id="downloadForm">\n        <div class="modal-content">\n            <div class="modal-header">\n                <button type="button" class="btn-close close" aria-label="<%= i18n.close %>" title="<%= i18n.close %>"><span aria-hidden="true">&times;</span></button>\n                <h4 class="modal-title"><%= i18n.download %></h4>\n            </div>\n            <div class="modal-body">\n                    <div class="form-group">\n                        <label for="filename"><%= i18n.filename %></label>\n                        <input id="filename" type="text" class="form-control" placeholder="<%= i18n.filename %>" />\n                    </div>\n                    <div class="form-group">\n                        <label for="formatPicker">Format</label>\n                        <select id="formatPicker">\n                            <% _.each(downloadFormatOptions, function(option) { %>\n                                <option value="<%= option %>"><%= option %></option>\n                            <% }) %>\n                        </select>\n                    </div>\n            </div>\n            <div class="modal-footer">\n                <button type="button" class="btn btn-close"><%= i18n.close %></button>\n                <button type="submit" class="btn btn-primary"><%= i18n.download %></button>\n            </div>\n        </div>\n    </form>\n</div>\n'},2100:function(e,t){e.exports='<form role="form">\r\n    <div class="starting-point-container form-group-sm">\r\n        <div class="starting-point-textfield">\r\n            <input type="text" placeholder="<%= i18n.startingPoint %>"\r\n                autocomplete="off" class="typeahead form-control" value="<%= startingPoint.displayName %>">\r\n            <i class="fas fa-crosshairs geolocation <%= !isGeolocationAvailable ? \'not-available\' : \'\' %>" title="<%= i18n.myLocation %>"></i>\r\n        </div>\r\n\r\n        <span title="<%= i18n.removeStartingPoint %>" class="starting-point-remove pointer far fa-times-circle fa-lg"></span>\r\n    </div>\r\n</form>\r\n'},2101:function(e,t){e.exports='<div class="btn-group btn-group-toggle" data-toggle="buttons">\r\n    <% _.each(speedProfiles, function(profile) { %>\r\n        <label class="btn btn-secondary <% if (speedProfile === profile.id) { %>active<% } %> speed-profile-option"\r\n            title="<%= i18n[profile.i18n] %>">\r\n            <input type="radio" value="<%= profile.id %>" /><i class="fas <%= profile.icon %> fa-lg"></i>\r\n        </label>\r\n    <% }); %>\r\n</div>'},2102:function(e,t){e.exports='<div class="optimization">\r\n  <%= i18n.reachabilityBy %>: \r\n  <% _.each(availableOptimizations, (option) => { %>\r\n    <input class="optimization-option" name="optimization" type="radio" id="<%= option.id %>" value="<%= option.id %>" <%= optimization === option.id ? \'checked\' : \'\' %>>\r\n    <label for="<%= option.id %>">\r\n      <%= i18n[option.i18n] %>\r\n    </label>\r\n  <% }) %>\r\n</div>\r\n\r\n\r\n<div class="slider-label">\r\n  <%= Optimization.TIME.id === optimization ? i18n.maxTravelTime : i18n.maxDistance %>\r\n</div>\r\n<div class="slider-ranges">\r\n  <div><%= sliderMin %><span class="unit"><%= Optimization[optimization].unit %></span></div>\r\n  <div class="current"><span id="slider1Value"><%= sliderCurrent %></span><span class="unit"><%= Optimization[optimization].unit %></span></div>\r\n  <div><%= sliderMax %><span class="unit"><%= Optimization[optimization].unit %></span></div>\r\n</div>\r\n<input type="range" min="<%= sliderMin %>" max="<%= sliderMax %>" value="<%= sliderCurrent %>" class="slider" id="slider1">\r\n\r\n<div class="slider-label">\r\n  <%= i18n.interval %>\r\n</div>\r\n<div class="slider-ranges">\r\n  <div><%= minInterval %><span class="unit"><%= Optimization[optimization].unit %></span></div>\r\n  <div class="current"><span id="slider2Value"><%= interval %></span><span class="unit"><%= Optimization[optimization].unit %></span></div>\r\n  <div><%= maxInterval %><span class="unit"><%= Optimization[optimization].unit %></span></div>\r\n</div>\r\n<input type="range" min="<%= minInterval %>" max="<%= maxInterval %>" value="<%= interval %>" class="slider" id="slider2">\r\n\r\n<div class="additional-options">\r\n  <b><%= i18n.avoidRoutes %></b>\r\n  <div class="avoid-feature-option-container">\r\n    <% _.each(availableAvoidFeatureOptions, function(avoidFeatureOption) { %>\r\n      <div>\r\n        <input type="checkbox" class="avoid-feature-option" id="<%= avoidFeatureOption.id %>" value="<%= avoidFeatureOption.id %>" <%=  avoidFeatureOptions.includes(avoidFeatureOption.id) ? \'checked\' : \'\' %>>\r\n        <label for="<%= avoidFeatureOption.id %>"><%= i18n[avoidFeatureOption.i18n] %></label>\r\n      </div>\r\n    <% }) %>\r\n  </div>\r\n</div>\r\n'},2103:function(e,t){e.exports='<h5 id="results-header">\r\n    <%= (!error && result) ? i18n.legend : \'\' %>\r\n    <% if (isLoading) { %>\r\n        <i id="results-loading-spinner" class="fas fa-spinner fa-spin fa-xl"></i>\r\n    <% } %>\r\n</h5>\r\n\r\n<% if (info) { %>\r\n    <i class="results-icon fas fa-bullseye"></i>\r\n    <div class="results-info"><%= info %></div>\r\n<% } %>\r\n<% if (error) { %>\r\n    <i class="results-icon error fas fa-exclamation-triangle"></i>\r\n    <div class="results-info"><%= error %></div>\r\n<% } %>\r\n\r\n\r\n<% if (!error && result) { %>\r\n    <div class="legend">\r\n        <% _.each(result.getAreas(), function(area) { %>\r\n            <div class="legend-entry">\r\n                <div class="legend-color" data-opacity="<%= legendOpacity %>" data-color="<%= area.getColorRgbString() %>"></div>\r\n                <span><%= area.getDisplayValue() %></span>\r\n                <span><%= Optimization[area.getOptimization()].unit %></span>\r\n            </div>\r\n        <% }) %>\r\n        <script>\r\n            $(".legend-color").each(function() {\r\n                $(this).css(\'background\', $(this).data(\'color\'));\r\n                $(this).css(\'opacity\', $(this).data(\'opacity\'));\r\n            });\r\n        <\/script>\r\n    </div>\r\n    <ul class="pager">\r\n        <li class="next"><a href="#" title="<%= i18n.download %>" aria-label="<%= i18n.download %>" id="downloadButton"><i class="fas fa-download"></i></a></li>\r\n    </ul>\r\n<% } %>'},2150:function(e,t){e.exports='<div id="reachability">\r\n    <div id="speed-profiles"></div>\r\n    <div id="starting-point"></div>\r\n    <div id="options"></div>\r\n    <div id="results"></div>\r\n</div>\r\n'}}]);