(window.webpackJsonp=window.webpackJsonp||[]).push([[12,245,247,248,250,258,259,269],{1798:function(e,t,n){"use strict";n.r(t),n.d(t,"SpeedProfile",function(){return r}),n.d(t,"AvoidFeatureOption",function(){return i}),n.d(t,"Optimization",function(){return o}),n.d(t,"DownloadFormat",function(){return a}),n.d(t,"ResultError",function(){return s});var r=Object.freeze({CAR:{id:"CAR",i18n:"car",icon:"fa-car",orsKey:"driving-car"},HGV:{id:"HGV",i18n:"hgv",icon:"fa-truck",orsKey:"driving-hgv"},FOOT:{id:"FOOT",i18n:"foot",icon:"fa-walking",orsKey:"foot-walking"},CYCLING:{id:"CYCLING",i18n:"cycling",icon:"fa-bicycle",orsKey:"cycling-regular"},WHEELCHAIR:{id:"WHEELCHAIR",i18n:"wheelchair",icon:"fa-wheelchair",orsKey:"wheelchair"}}),i=Object.freeze({HIGHWAYS:{id:"HIGHWAYS",i18n:"highways",availableProfiles:["CAR","HGV"],orsKey:"highways"},TOLLWAYS:{id:"TOLLWAYS",i18n:"tollways",availableProfiles:["CAR","HGV"],orsKey:"tollways"},FERRIES:{id:"FERRIES",i18n:"ferries",availableProfiles:["CAR","HGV","CYCLING","FOOT","WHEELCHAIR"],orsKey:"ferries"},STEPS:{id:"STEPS",i18n:"steps",availableProfiles:["CYCLING","FOOT","WHEELCHAIR"],orsKey:"steps"}}),o=Object.freeze({TIME:{id:"TIME",i18n:"time",orsKey:"time",multiplicator:60,unit:"min"},DISTANCE:{id:"DISTANCE",i18n:"distance",orsKey:"distance",multiplicator:1e3,unit:"km"}}),a=Object.freeze({GEOJSON:"GEOJSON",KML:"KML"}),s=Object.freeze({NO_ISOCHRONES_FOUND:{i18n:"noIsochronesFound"},AVOID_AREA_TOO_LARGE:{i18n:"avoidAreasTooLarge"},FETCHING_FAILED:{i18n:"fetchingFailed"}})},1799:function(e,t,n){"use strict";n.r(t);var r=n(41);t.default=new r.a},1800:function(e,i,o){"use strict";o.r(i),function(t){o.d(i,"transformCoordinatesLocalToWgs84Projection",function(){return e}),o.d(i,"transformCoordinatesWgs84ToLocalProjection",function(){return r});var n=o(55);function e(e){return Object(n.e)(t.request("MapView","getProjection").getCode(),"EPSG:4326",e)}function r(e){return Object(n.e)("EPSG:4326",t.request("MapView","getProjection").getCode(),e)}}.call(this,o(4))},1862:function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"default",function(){return r});var r=function(){function r(e){var t=e.bbox,n=e.error;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.bbox=t,this.areas=[],this.error=n}var e,t,n;return e=r,(t=[{key:"getBbox",value:function(){return this.bbox}},{key:"getAreas",value:function(){return this.areas}},{key:"addArea",value:function(e){return this.areas.push(e)}},{key:"getError",value:function(){return this.error}}])&&i(e.prototype,t),n&&i(e,n),r}()},1880:function(e,t,n){"use strict";n.r(t),function(a){function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"default",function(){return e});var e=function(){function c(e,t,n,r,i,o,a,s,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.coordinates=e,this.groupIndex=t,this.value=n,this.maximum=r,this.interval=i,this.speedProfile=o,this.optimization=a,this.avoidSpeedProfileOptions=s,this.displayValue=u,this.calculateColor()}var e,t,n;return e=c,(t=[{key:"calculateColor",value:function(){var e=a.request("Reachability","getSettings").isochrones.styleAreas,t=e.startColor,n=e.endColor,r=this.getValue()-this.getInterval(),i=this.getMaximum()-this.getInterval(),o=0==r||0==i?0:r/i;this.color=[(n[0]-t[0])*o+t[0],(n[1]-t[1])*o+t[1],(n[2]-t[2])*o+t[2]]}},{key:"getCoordinates",value:function(){return this.coordinates}},{key:"getGroupIndex",value:function(){return this.groupIndex}},{key:"getValue",value:function(){return this.value}},{key:"getMaximum",value:function(){return this.maximum}},{key:"getInterval",value:function(){return this.interval}},{key:"getSpeedProfile",value:function(){return this.speedProfile}},{key:"getOptimization",value:function(){return this.optimization}},{key:"getColor",value:function(){return this.color}},{key:"getColorRgbString",value:function(){return"#"+((1<<24)+(Math.round(this.color[0])<<16)+(Math.round(this.color[1])<<8)+Math.round(this.color[2])).toString(16).slice(1)}},{key:"getAvoidSpeedProfileOptions",value:function(){return this.avoidSpeedProfileOptions}},{key:"getDisplayValue",value:function(){return this.displayValue}},{key:"getGeojsonFeature",value:function(e){return{type:"Feature",geometry:{type:"Polygon",coordinates:this.getCoordinates()},properties:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({value:this.getValue(),interval:this.getInterval(),maximum:this.getMaximum(),color:this.getColor(),groupIndex:this.getGroupIndex(),optimization:this.getOptimization(),speedProfile:this.getSpeedProfile(),avoidSpeedProfileOptions:this.getAvoidSpeedProfileOptions()},e)}}}])&&o(e.prototype,t),n&&o(e,n),c}()}.call(this,n(4))},1947:function(e,t,n){"use strict";n.r(t);var r=n(50),i=n(36),o=n(5),a=n.n(o),s=n(1799),u=n(1800),c=a.a.Model.extend({defaults:{feature:null,displayName:"",addedToSource:!1,coordinates:[]},initialize:function(){var n=this;this.getFeature()?(this.set("coordinates",this.getFeature().getGeometry().getCoordinates()),this.set("addedToSource",!0)):(this.set("coordinates",[]),this.set("feature",new i.a({geometry:new r.a(this.getCoordinates())}))),this.getFeature().getGeometry().on("change",function(e){var t=e.target;n.set("coordinates",t.getCoordinates())})},getCoordinates:function(){return this.get("coordinates")},getCoordinatesWgs84:function(){return this.hasCoordinates()?Object(u.transformCoordinatesLocalToWgs84Projection)(this.getCoordinates()):[]},setCoordinates:function(e){this.set("coordinates",e),this.getFeature().getGeometry().setCoordinates(e),this.isAddedToSource()||(s.default.addFeature(this.getFeature()),this.set("addedToSource",!0)),this.trigger("changeCoordinates")},hasCoordinates:function(){return this.getCoordinates()&&2===this.getCoordinates().length},getFeature:function(){return this.get("feature")},getDisplayName:function(){return this.get("displayName")?this.get("displayName"):2===this.getCoordinates().length?"".concat(this.getCoordinates()[0],", ").concat(this.getCoordinates()[1]):null},setDisplayName:function(e){this.set("displayName",e)},isAddedToSource:function(){return this.get("addedToSource")},setFromGeosearchResult:function(e){this.setDisplayName(e.getDisplayName()),this.setCoordinates(e.getCoordinates())},reset:function(){this.set("displayName",null),this.isAddedToSource()&&s.default.removeFeature(this.getFeature()),this.set("addedToSource",!1),this.getFeature().getGeometry().setCoordinates([]),this.trigger("changeCoordinates")}});t.default=c},1948:function(e,o,a){"use strict";a.r(o),function(A){a.d(o,"fetchOrsIsochrones",function(){return t});var e=a(195),j=a.n(e),T=a(1862),x=a(1880),F=a(1798),E=a(1800);function R(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function t(e){return n.apply(this,arguments)}function n(){var s;return s=regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,u,c,l,f,d,h,g,p,v,m,y,b,O,I,C,P,S,w;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.coordinates,r=t.speedProfile,i=t.optimization,o=t.range,a=t.interval,s=t.avoidFeatureOptions,u=A.request("Reachability","getSettings").isochrones,c=u.serviceId,l=A.request("RestReader","getServiceById",c),f="".concat(l.get("url"),"/v2/isochrones/").concat(F.SpeedProfile[r].orsKey,"/geojson"),d=F.Optimization[i],h=o*d.multiplicator,g=a*d.multiplicator,b=y=m=v=p=null,e.prev=3,e.next=6,j.a.post(f,{interval:g,locations:[n],location_type:"start",range_type:d.orsKey,range:[h],options:k({},0<s.length&&{avoid_features:s.map(function(e){return F.AvoidFeatureOption[e].orsKey})}),area_units:"m",units:"m"});case 6:b=e.sent,e.next=12;break;case 9:return e.prev=9,e.t0=e.catch(3),e.abrupt("return",new T.default({error:F.ResultError.FETCHING_FAILED}));case 12:for(p=b.data,v=Object(E.transformCoordinatesWgs84ToLocalProjection)([p.bbox[0],p.bbox[1]]),m=Object(E.transformCoordinatesWgs84ToLocalProjection)([p.bbox[2],p.bbox[3]]),y=new T.default([v[0],v[1],m[0],m[1]]),O=p.features.length-1;0<=O;O--){I=p.features[O],C=[],P=R(I.geometry.coordinates[0]);try{for(P.s();!(S=P.n()).done;)w=S.value,C.push(Object(E.transformCoordinatesWgs84ToLocalProjection)(w))}catch(e){P.e(e)}finally{P.f()}y.addArea(new x.default([C],I.properties.group_index,I.properties.value,h,g,r,i,s.map(function(e){return e.id}),I.properties.value/d.multiplicator))}return e.abrupt("return",y);case 18:case"end":return e.stop()}},e,null,[[3,9]])}),(n=function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function i(e){c(r,t,n,i,o,"next",e)}function o(e){c(r,t,n,i,o,"throw",e)}i(void 0)})}).apply(this,arguments)}}.call(this,a(4))},1980:function(e,f,d){"use strict";d.r(f),function(n,i){var e=d(18),r=d(5),o=d(1798),a=d(1947),u=d(1948);d(1862);function c(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var t=e.a.extend({defaults:{isActive:!1,renderToWindow:!1,isVisibleInMenu:!0,deactivateGFI:!0,id:"reachability",name:"Reachability",geosearch:{minChars:3,limit:10,serviceId:null},geosearchReverse:{serviceId:null,distance:1e3,filter:null},isochrones:{serviceId:null,styleStartingPoint:{lineColor:[255,127,0],lineWidth:4,fillColor:[255,127,0],opacity:.3,radius:8},styleAreas:{lineWidth:1,lineColor:"black",opacity:.65,startColor:[66,245,78],endColor:[245,66,66]}},distance:30,minDistance:1,maxDistance:100,time:30,minTime:1,maxTime:120,interval:10,minInterval:3,maxInterval:30,speedProfile:o.SpeedProfile.CAR.id,startingPoint:null,optimization:o.Optimization.TIME.id,avoidFeatureOptions:[],isochronesResult:null,isLoadingIsochrones:!1,requestCount:0},initialize:function(){var e=this;this.superInitialize(),this.set("startingPoint",new a.default),this.listenTo(this,{"change:speedProfile change:avoidFeatureOptions":this.findIsochrones,"change:optimization":function(){o.Optimization.TIME.id===e.getOptimization()?e.setTime(e.getTime()):e.setDistance(e.getDistance()),e.findIsochrones()}});var t=r.Radio.channel("Reachability");t.reply({getSettings:this.getSettings},this),t.on({findIsochrones:this.findIsochrones},this)},getSettings:function(){return{geosearch:n.extend(this.defaults.geosearch,this.get("geosearch")),geosearchReverse:n.extend(this.defaults.geosearchReverse,this.get("geosearchReverse")),isochrones:n.extend(this.defaults.isochrones,this.get("isochrones"))}},getStartingPoint:function(){return this.get("startingPoint")},setStartingPoint:function(e){this.set("startingPoint",e)},getMinTime:function(){return this.get("minTime")},getMaxTime:function(){return this.get("maxTime")},getTime:function(){return this.get("time")},setTime:function(e){this.setMinInterval(Math.ceil(e/10)),this.setMaxInterval(e),this.set("time",e)},getMinDistance:function(){return this.get("minDistance")},getMaxDistance:function(){return this.get("maxDistance")},getDistance:function(){return this.get("distance")},setDistance:function(e){this.setMinInterval(Math.ceil(e/10)),this.setMaxInterval(e),this.set("distance",e)},getMinInterval:function(){return this.get("minInterval")},getMaxInterval:function(){return this.get("maxInterval")},getInterval:function(){return this.get("interval")},setInterval:function(e){this.set("interval",e)},setMaxInterval:function(e){this.set("maxInterval",e),this.getInterval()>e&&this.setInterval(e)},setMinInterval:function(e){this.set("minInterval",e),this.getInterval()<e&&this.setInterval(e)},isLoadingIsochrones:function(){return this.get("isLoadingIsochrones")},getSpeedProfile:function(){return this.get("speedProfile")},setSpeedProfile:function(e){this.set("speedProfile",e)},getAvoidFeatureOptions:function(){return this.get("avoidFeatureOptions")},getOptimization:function(){return this.get("optimization")},setOptimization:function(e){this.set("optimization",e)},getIsochronesResult:function(){return this.get("isochronesResult")},setIsochronesResult:function(e){this.set("isochronesResult",e)},getFilteredAvoidFeatureOptions:function(){var t=this.getAvailableAvoidFeatureOptions().map(function(e){return e.id});return n.filter(this.get("avoidFeatureOptions"),function(e){return t.includes(e)})},getAvailableAvoidFeatureOptions:function(){var t=this;return Object.values(o.AvoidFeatureOption).filter(function(e){return e.availableProfiles.includes(t.getSpeedProfile())})},toggleAvoidFeatureOption:function(e){var t=this.getAvoidFeatureOptions();this.set("avoidFeatureOptions",t.includes(e)?n.without(t,e):[].concat(s(t),[e]))},isInputDisabled:function(){return this.isLoadingDirections()},findIsochrones:function(){var s,r=this;return s=regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.getStartingPoint().hasCoordinates()){e.next=3;break}return r.setIsochronesResult(null),e.abrupt("return");case 3:return r.set("requestCount",r.get("requestCount")+1),t=r.get("requestCount"),r.set("isLoadingIsochrones",!0),e.next=8,Object(u.fetchOrsIsochrones)({coordinates:r.getStartingPoint().getCoordinatesWgs84(),language:i.language,speedProfile:r.getSpeedProfile(),optimization:r.getOptimization(),avoidFeatureOptions:r.getFilteredAvoidFeatureOptions(),range:r.getOptimization()===o.Optimization.TIME.id?r.getTime():r.getDistance(),interval:r.getInterval()});case 8:if(n=e.sent,t!==r.get("requestCount"))return e.abrupt("return");e.next=11;break;case 11:r.set("requestCount",0),r.setIsochronesResult(n),r.set("isLoadingIsochrones",!1);case 14:case"end":return e.stop()}},e)}),function(){var e=this,a=arguments;return new Promise(function(t,n){var r=s.apply(e,a);function i(e){c(r,t,n,i,o,"next",e)}function o(e){c(r,t,n,i,o,"throw",e)}i(void 0)})}()}});f.default=t}.call(this,d(3),d(24))}}]);