(window.webpackJsonp=window.webpackJsonp||[]).push([[237,234,239],{1833:function(e,t,r){"use strict";r.r(t),function(o){r.d(t,"MapFuncs",function(){return l});var l={getOlMap:function(){return o.request("Map","getMap")},getLayerById:function(t){return o.request("Map","getLayers").getArray().find(function(e){return e.get("id")===t})},getMapViewerState:function(){var e=l.getOlMap(),t=o.request("ModelList","getCollection"),r=t.where({type:"layer"}),n=t.where({type:"folder"}),a=[].concat(r,n),i={};return i.extent=e.getView().calculateExtent(),i.layers=a.map(function(e){var t=e.toJSON();return{id:t.id,transparency:t.transparency,isSelected:t.isSelected,selectionIDX:t.selectionIDX}}),i},applyMapViewerState:function(e){e.extent&&o.trigger("Map","zoomToExtent",e.extent),e.layers&&(e.layers.forEach(function(e){var t=o.request("ModelList","getModelByAttributes",{id:e.id});t&&t.set(e)}),o.trigger("Util","refreshTree"))}};t.default=l}.call(this,r(4))},1848:function(e,t,n){"use strict";n.r(t),function(a,i){function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}n.d(t,"ThemedMapFuncs",function(){return r});var r={applyThemedMap:function(e){e.layers.forEach(function(e){var t=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach(function(e){l(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},e),r=e.opacity?-100*e.opacity+100:0;t.isSelected=e.visible,t.visibility=e.visible,t.transparency=r,t.name=e.title,t.id=e.uuid+"-"+Math.floor(100*Math.random()),t.tilesize=e.tilesize?e.tilesize:256,t.gfiAttributes=e.gfiAttributes?e.gfiAttributes:"showAll",a.Radio.trigger("Parser","addWmsLayer",t);var n=i.request("ModelList","getModelByAttributes",{name:e.title}).get("id");i.trigger("ModelList","setModelAttributesById",n,{bbServiceUuid:e.uuid}),i.trigger("ModelList","setModelAttributesById",n,{bbThemedMapLayer:!0})}),a.Radio.trigger("Map","zoomToExtent",e.extent)},getExternalLayerModels:function(){var e=i.request("ModelList","getCollection"),t=e.where({type:"layer"}),r=e.where({type:"folder"});return[].concat(t,r).filter(function(e){var t=e.toJSON();return t.importModule&&"importWmsExternal"===t.importLayerType||t.bbThemedMapLayer})},getExternalLayers:function(){var e=r.getExternalLayerModels();return e.sort(function(e,t){return e.get("selectionIDX")-t.get("selectionIDX")}),e.map(function(e){var t=e.toJSON(),r="ignore"===t.legendURL?void 0:t.legendURL;return{uuid:t.bbServiceUuid,url:t.url,layers:t.layers,title:t.name,transparent:t.transparent,opacity:Number((1-t.transparency/100).toFixed(2)),visible:t.isSelected,legendURL:r,tilesize:t.tilesize,gfiAttributes:t.gfiAttributes}})},removeExternalLayers:function(){var e=r.getExternalLayerModels();a.Radio.trigger("MapMarker","hideWktFeature"),e.forEach(function(e){a.Radio.trigger("ClassicTree","removeLayerById",e.get("id"))})},getThemedMapConf:function(){var e=i.request("Map","getMap"),t={};return t.extent=e.getView().calculateExtent(),t.layers=r.getExternalLayers(),t}};t.default=r}.call(this,n(5),n(4))},1942:function(e,t,r){"use strict";r.r(t),function(p,d,f){r.d(t,"SaveButton",function(){return e});var g=r(1833),y=r(1848);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach(function(e){a(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var e={addSaveButton:function(e,t,r){var n=e,a=t,i={class:"btn btn-default dropdown",type:"button",icon:"glyphicon glyphicon-save",disabled:!1,text:"Save State"};e||(n=function(){},console.warn("Warning: No callback function for the save button was defined.")),t||(a="#root"),r&&(i=b(b({},i),r));function o(){var e=g.default.getMapViewerState(),t=[e,y.default.getThemedMapConf()];!0===r.mapViewerStateOnly&&(t=e),n(t,function(e){e&&d.trigger("Alert","alert",{kategorie:"alert-info",text:e})})}var l=p("<button></button>"),c=p(a);if(i.class&&l.attr("class",i.class),i.type&&l.prop("type",i.type),i.disabled&&l.prop("disabled",i.disabled),i.icon){var s=p("<span></span>");s.attr("class",i.icon),l.append(s),l.append(" ")}return l.append(i.text),l.click(o),0===c.length?null:(c.append(l),f.Radio.channel("i18next").on("languageChanged",function(){return 0===c.length||(l.click(o),c.append(l)),null}),l)},addSaveMenuEntry:function(e,r){var t=f.Radio.request("Util","isViewMobile"),n=e,a={class:t?"list-group-item":"dropdown dropdown-folder",type:"",icon:"glyphicon fas fa-star fa-lg",text:"Save State"};e||(n=function(){},console.warn("Warning: No callback function for the save menu entry was defined.")),r&&(a=b(b({},a),r));function i(){var e=g.default.getMapViewerState(),t=[e,y.default.getThemedMapConf()];!0===r.mapViewerStateOnly&&(t=e),n(t,function(e){e&&d.trigger("Alert","alert",{kategorie:"alert-info",text:e})})}var o=p("<li><a href='#' title='"+a.text+"'></a></li>"),l=p("#root");a.class&&o.attr("class",a.class),a.type&&o.prop("type",a.type),t&&o.append("<span class='title'>"+a.text+"</span");var c=p("<span></span>"),s=o.find("a");c.attr("class",a.icon),s.append(c),s.append(" ");var u=p("<span></span>");return u.attr("class","menuitem"),s.append(u),o.click(i),0===l.length?null:(l.append(o),f.Radio.channel("i18next").on("languageChanged",function(){return 0===l.length||(o.click(i),l.append(o)),null}),o)}};t.default=e}.call(this,r(10),r(4),r(5))}}]);