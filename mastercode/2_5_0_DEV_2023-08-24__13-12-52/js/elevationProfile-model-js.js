(window.webpackJsonp=window.webpackJsonp||[]).push([[195,196,197,198,199,201],{1836:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"default",function(){return i});var i=function(){function s(e,t){var n=e.x,r=e.y,i=e.z,o=e.dist;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var u=[n,r,i];t&&(u=t(u)),this.distance=o,this.coordinates=u}var e,t,n;return e=s,(t=[{key:"getDistance",value:function(){return this.distance}},{key:"getX",value:function(){return this.coordinates[0]}},{key:"getY",value:function(){return this.coordinates[1]}},{key:"getZ",value:function(){return this.coordinates[2]}}])&&r(e.prototype,t),n&&r(e,n),s}()},1840:function(e,s,a){"use strict";a.r(s),function(t){a.d(s,"transformCoordinatesLocalToWgs84Projection",function(){return e}),a.d(s,"transformCoordinatesWgs84ToLocalProjection",function(){return r}),a.d(s,"transformCoordinatesLocalToEPSG25833Projection",function(){return i}),a.d(s,"transformCoordinatesEPSG25833ToLocalProjection",function(){return o}),a.d(s,"calculateRelativeDistance",function(){return u});var n=a(55),f=a(63),h=a(50),g=a(1);function e(e){return Object(n.e)(t.request("MapView","getProjection").getCode(),"EPSG:4326",e)}function r(e){return Object(n.e)("EPSG:4326",t.request("MapView","getProjection").getCode(),e)}function i(e){return Object(n.e)(t.request("MapView","getProjection").getCode(),"EPSG:25833",e)}function o(e){return Object(n.e)("EPSG:25833",t.request("MapView","getProjection").getCode(),e)}function u(e,t){for(var n=e.getGeometry(),r=n.getClosestPoint(t),i=n.getCoordinates(),o=0,u=!1,s=0;s<i.length-1;s++){var a=i[s],c=i[s+1],l=new f.a([a,c]);if(l.intersectsExtent(Object(g.c)(new h.a(r).getExtent(),.001))){o+=new f.a([a,r]).getLength(),u=!0;break}o+=l.getLength()}return u?o/n.getLength():0}}.call(this,a(4))},1847:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var i=n(3);n(1836);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.steps=e,this.error=t}var e,t,r;return e=n,r=[{key:"createErrorResult",value:function(e){return new n(null,e)}}],(t=[{key:"getSteps",value:function(){return this.steps}},{key:"getError",value:function(){return this.error}},{key:"hasNoError",value:function(){return!this.error}},{key:"getDistance",value:function(){var e=i.default.last(this.steps);return e?e.getDistance():0}},{key:"getMaxHeight",value:function(){return i.default.max(this.steps.map(function(e){return e.getZ()}))}},{key:"getMinHeight",value:function(){return i.default.min(this.steps.map(function(e){return e.getZ()}))}},{key:"getAscent",value:function(){return i.default.reduce(this.getHeightDifferences(),function(e,t){return 0<t?t+e:e},0)}},{key:"getDescent",value:function(){return Math.abs(i.default.reduce(this.getHeightDifferences(),function(e,t){return t<0?t+e:e},0))}},{key:"getHeightDifferences",value:function(){return this.steps.map(function(e,t,n){return 0==t?0:e.getZ()-n[t-1].getZ()})}},{key:"convertToGraphData",value:function(){return this.steps.map(function(e){return{x:e.getDistance(),y:e.getZ()}})}},{key:"convertToGraphDataAsPairs",value:function(){return this.convertToGraphData().reduce(function(e,t,n,r){return n<r.length-1&&e.push(r.slice(n,n+2)),e},[])}}])&&o(e.prototype,t),r&&o(e,r),n}()},1857:function(e,t,n){"use strict";n.r(t),n.d(t,"ResultError",function(){return r});var r=Object.freeze({NO_PROFILE_FOUND:{i18n:"noProfileFound"},FETCHING_FAILED:{i18n:"profileFetchFailed"},SERVICE_UNAVAILABLE:{i18n:"profileServiceUnavailable"}})},1878:function(e,r,i){"use strict";i.r(r),function(c){i.d(r,"fetchElevationProfile",function(){return t});var e=i(195),l=i.n(e),f=i(1840),h=i(1857),g=i(1847),d=i(1836);function a(e,t,n,r,i,o,u){try{var s=e[o](u),a=s.value}catch(e){return void n(e)}s.done?t(a):Promise.resolve(a).then(r,i)}function t(e){return n.apply(this,arguments)}function n(){var s;return s=regeneratorRuntime.mark(function e(t){var n,r,i,o,u,s,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.request("ElevationProfile","getSettings"),r={type:"LineString",coordinates:t.map(f.transformCoordinatesLocalToEPSG25833Projection)},i=null,e.prev=2,o=n.serviceId,u=c.request("RestReader","getServiceById",o).get("url"),s="".concat(u,"/geojson/line"),e.next=6,l.a.post(s,r,{timeout:n.timeout});case 6:i=e.sent,e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(2),404==e.t0.response.status)return e.abrupt("return",g.default.createErrorResult(h.ResultError.NO_PROFILE_FOUND));e.next=13;break;case 13:return e.abrupt("return",g.default.createErrorResult(h.ResultError.FETCHING_FAILED));case 14:return a=i.data.map(function(e){return new d.default(e,f.transformCoordinatesEPSG25833ToLocalProjection)}),e.abrupt("return",new g.default(a));case 16:case"end":return e.stop()}},e,null,[[2,9]])}),(n=function(){var e=this,u=arguments;return new Promise(function(t,n){var r=s.apply(e,u);function i(e){a(r,t,n,i,o,"next",e)}function o(e){a(r,t,n,i,o,"throw",e)}i(void 0)})}).apply(this,arguments)}}.call(this,i(4))},1932:function(e,t,n){"use strict";n.r(t);var r=n(18),i=n(5),o=n(1878),u=(n(1847),n(106)),s=n(3);function a(e,t,n,r,i,o,u){try{var s=e[o](u),a=s.value}catch(e){return void n(e)}s.done?t(a):Promise.resolve(a).then(r,i)}var c,l,f=r.a.extend({defaults:{id:"elevationProfile",serviceId:"lgb_elevation",timeout:1e4,styleChart:{markerWidth:5,ascentAngleRange:[0,.045]},sourceRoute:{olSource:null,olFeature:null,coordinates:null,minimize:!1},elevationResult:null,isOpen:!1,isMinimized:!1,isLoadingElevation:!1,requestCount:0},initialize:function(e){var t=this;this.set("styleChart",s.default.extend(this.defaults.styleChart,e.styleChart));var n=i.Radio.channel("ElevationProfile");n.reply({getSettings:this.getSettings,isOpen:function(){return t.isOpen()},isMinimized:function(){return t.isMinimized()}},this),n.on({open:this.open,close:function(){return t.set("isOpen",!1)}},this)},getSettings:function(){return this.toJSON()},getSourceRoute:function(){return this.get("sourceRoute")},getElevationResult:function(){return this.get("elevationResult")},isLoadingElevation:function(){return this.get("isLoadingElevation")},isOpen:function(){return this.get("isOpen")},isMinimized:function(){return this.get("isMinimized")},setMinimized:function(e){this.set("isMinimized",e)},hasSourceGeometry:function(){return this.getSourceRoute()&&this.getSourceRoute().olFeature&&this.getSourceRoute().olFeature.getGeometry()&&this.getSourceRoute().olSource},isSourceGeometryMultiLineString:function(){return this.hasSourceGeometry()&&this.getSourceRoute().olFeature.getGeometry()instanceof u.a},open:(c=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.coordinates){e.next=2;break}return e.abrupt("return");case 2:return"minimize"in t&&this.set("isMinimized",t.minimize),this.set("isOpen",!0),this.set("isLoadingElevation",!0),this.set("sourceRoute",t),this.set("requestCount",this.get("requestCount")+1),n=this.get("requestCount"),e.next=10,Object(o.fetchElevationProfile)(t.coordinates);case 10:if(r=e.sent,n!==this.get("requestCount"))return e.abrupt("return");e.next=13;break;case 13:this.set("requestCount",0),this.set("isLoadingElevation",!1),this.set("elevationResult",r);case 16:case"end":return e.stop()}},e,this)}),l=function(){var e=this,u=arguments;return new Promise(function(t,n){var r=c.apply(e,u);function i(e){a(r,t,n,i,o,"next",e)}function o(e){a(r,t,n,i,o,"throw",e)}i(void 0)})},function(e){return l.apply(this,arguments)})});t.default=f}}]);